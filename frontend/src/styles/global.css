@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Light theme - White backgrounds with #2563EB accents */
    --background: 0 0% 100%;
    --foreground: 222.2 84% 4.9%;

    --card: 0 0% 100%;
    --card-foreground: 222.2 84% 4.9%;

    --popover: 0 0% 100%;
    --popover-foreground: 222.2 84% 4.9%;

    --primary: 221 82% 53%; /* #2563EB */
    --primary-foreground: 210 40% 98%;

    --secondary: 210 40% 96.1%;
    --secondary-foreground: 222.2 47.4% 11.2%;

    --muted: 210 40% 96.1%;
    --muted-foreground: 215.4 16.3% 46.9%;

    --accent: 221 82% 53%; /* #2563EB accent */
    --accent-foreground: 210 40% 98%;

    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 210 40% 98%;

    --border: 214.3 31.8% 91.4%;
    --input: 214.3 31.8% 91.4%;
    --ring: 221 82% 53%; /* #2563EB ring */

    --radius: 0.5rem;
  }

  .dark {
    /* Dark theme - Inverted panels/text with #2563EB accents */
    --background: 222.2 84% 4.9%;
    --foreground: 210 40% 98%;

    --card: 217.2 32.6% 17.5%;
    --card-foreground: 210 40% 98%;

    --popover: 217.2 32.6% 17.5%;
    --popover-foreground: 210 40% 98%;

    --primary: 221 82% 53%; /* #2563EB - same in dark mode */
    --primary-foreground: 210 40% 98%;

    --secondary: 217.2 32.6% 17.5%;
    --secondary-foreground: 210 40% 98%;

    --muted: 217.2 32.6% 17.5%;
    --muted-foreground: 215 20.2% 65.1%;

    --accent: 221 82% 53%; /* #2563EB accent - same in dark mode */
    --accent-foreground: 210 40% 98%;

    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 210 40% 98%;

    --border: 217.2 32.6% 17.5%;
    --input: 217.2 32.6% 17.5%;
    --ring: 221 82% 53%; /* #2563EB ring - same in dark mode */
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
  }
  html {
    font-family: 'Inter', system-ui, sans-serif;
  }
}

@layer components {
  /* BEM Button Components */
  .btn {
    @apply font-medium py-2 px-4 rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2;
  }

  .btn--primary {
    @apply bg-primary text-primary-foreground hover:bg-primary/90 focus:ring-primary;
  }

  .btn--secondary {
    @apply bg-secondary text-secondary-foreground hover:bg-secondary/80 focus:ring-secondary;
  }

  .btn--ghost {
    @apply hover:bg-accent hover:text-accent-foreground text-foreground focus:ring-accent;
  }

  .btn--destructive {
    @apply bg-destructive text-destructive-foreground hover:bg-destructive/90 focus:ring-destructive;
  }

  .btn--sm {
    @apply py-1 px-3 text-sm;
  }

  .btn--lg {
    @apply py-3 px-6 text-lg;
  }

  /* BEM Input Components */
  .input {
    @apply w-full px-3 py-2 border border-input rounded-lg bg-background text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:border-transparent transition-colors duration-200;
  }

  .input--error {
    @apply border-destructive focus:ring-destructive;
  }

  /* BEM Card Components */
  .card {
    @apply bg-card text-card-foreground rounded-lg border border-border shadow-sm;
  }

  .card__header {
    @apply p-6 pb-0;
  }

  .card__content {
    @apply p-6;
  }

  .card__footer {
    @apply p-6 pt-0;
  }

  /* BEM Sidebar Components */
  .sidebar {
    @apply fixed inset-y-0 left-0 z-50 w-64 bg-background shadow-lg transform transition-transform duration-300 ease-in-out lg:translate-x-0 lg:static lg:inset-0;
  }

  .sidebar--open {
    @apply translate-x-0;
  }

  .sidebar--closed {
    @apply -translate-x-full;
  }

  .sidebar__link {
    @apply flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors duration-200;
  }

  .sidebar__link--active {
    @apply bg-accent text-accent-foreground;
  }

  .sidebar__link--inactive {
    @apply text-muted-foreground hover:bg-accent hover:text-accent-foreground;
  }

  .sidebar__user-section {
    @apply border-t border-border p-4 space-y-4;
  }

  .sidebar__user-info {
    @apply flex items-center gap-3;
  }

  .sidebar__user-avatar {
    @apply h-8 w-8 rounded-full;
  }

  .sidebar__user-details {
    @apply flex-1 min-w-0;
  }

  .sidebar__user-name {
    @apply text-sm font-medium text-foreground truncate;
  }

  .sidebar__user-email {
    @apply text-xs text-muted-foreground truncate;
  }

  .sidebar__logout-btn {
    @apply w-full flex items-center px-3 py-2 text-sm font-medium rounded-lg;
    @apply text-muted-foreground hover:bg-accent hover:text-accent-foreground;
    @apply transition-colors duration-200;
  }

  /* BEM KPI Components */
  .kpi-card {
    @apply card p-6 hover:shadow-md transition-shadow duration-200 cursor-pointer;
  }

  .kpi-card__header {
    @apply flex items-center justify-between mb-4;
  }

  .kpi-card__title {
    @apply text-sm font-medium text-muted-foreground;
  }

  .kpi-card__value {
    @apply text-2xl font-bold text-foreground;
  }

  .kpi-card__delta {
    @apply flex items-center text-sm;
  }

  .kpi-card__delta--positive {
    @apply text-green-600;
  }

  .kpi-card__delta--negative {
    @apply text-red-600;
  }

  /* BEM Signal Components */
  .signal-card {
    @apply card p-4 hover:shadow-md transition-all duration-200 cursor-pointer;
  }

  .signal-card__header {
    @apply flex items-start justify-between mb-3;
  }

  .signal-card__title {
    @apply font-semibold text-foreground;
  }

  .signal-card__priority {
    @apply px-2 py-1 rounded-full text-xs font-medium;
  }

  .signal-card__priority--high {
    @apply bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200;
  }

  .signal-card__priority--medium {
    @apply bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200;
  }

  .signal-card__priority--low {
    @apply bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200;
  }

  /* BEM Chat Components */
  .chat-pane {
    @apply bg-card border border-border rounded-lg h-full flex flex-col;
  }

  .chat-pane__header {
    @apply p-4 border-b border-border;
  }

  .chat-pane__messages {
    @apply flex-1 overflow-y-auto p-4 space-y-4;
  }

  .chat-pane__input {
    @apply p-4 border-t border-border;
  }

  .chat-message {
    @apply flex gap-3;
  }

  .chat-message--user {
    @apply flex-row-reverse;
  }

  .chat-message--assistant {
    @apply flex-row;
  }

  .chat-message__bubble {
    @apply max-w-xs lg:max-w-md px-4 py-2 rounded-lg;
  }

  .chat-message__bubble--user {
    @apply bg-primary text-primary-foreground;
  }

  .chat-message__bubble--assistant {
    @apply bg-muted text-muted-foreground;
  }

  /* BEM Filter Components */
  .filter-toolbar {
    @apply flex flex-wrap gap-4 p-4 bg-card border border-border rounded-lg mb-6;
  }

  .filter-group {
    @apply flex flex-col gap-2;
  }

  .filter-group__label {
    @apply text-sm font-medium text-muted-foreground;
  }

  .filter-group__input {
    @apply input;
  }

  .filter-group__select {
    @apply input;
  }

  /* Accessibility enhancements */
  .focus-visible {
    @apply focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2;
  }

  .sr-only {
    @apply absolute w-px h-px p-0 -m-px overflow-hidden whitespace-nowrap border-0;
  }

  /* Smooth transitions for all interactive elements */
  * {
    @apply transition-colors duration-200;
  }

  /* High contrast mode support */
  @media (prefers-contrast: high) {
    .btn--primary {
      @apply border-2 border-primary;
    }
    
    .btn--secondary {
      @apply border-2 border-secondary;
    }
  }

  /* Reduced motion support */
  @media (prefers-reduced-motion: reduce) {
    * {
      @apply transition-none;
    }
    
    .animate-spin {
      @apply animate-none;
    }
  }
}
